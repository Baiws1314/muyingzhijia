"use strict";$(function(){var c=location.search.replace("?","");$.ajax({type:"get",url:"http://47.104.244.134:8080/cartlist.do",async:!0,data:{token:c},success:function(t){console.log(t);var a="";for(var n in t)a+="<li id="+t[n].id+" gid="+t[n].gid+'>\n\t\t\t\t\t\t<a class="pic inblock">\n\t\t\t\t\t\t\t<img src="'+t[n].goods.picurl+'"/>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span class="title inblock">'+t[n].goods.name+'</span>\n\t\t\t\t\t\t<span class="pri inblock">￥'+t[n].goods.price+'</span>\n\t\t\t\t\t\t<span class="count-a inblock">\n\t\t\t\t\t\t\t<a class="minus">\n\t\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<input type="text" class="inblock" value="'+t[n].count+'"/>\n\t\t\t\t\t\t\t<a class="add">\n\t\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t\t<em></em>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="allPrice inblock">￥'+t[n].goods.price*t[n].count+'</span>\n\t\t\t\t\t\t<span class="action-o inblock">删除</span>\n\t\t\t\t\t</li>';$(".cart-list").html(a),$(".pic,.title").click(function(){var t=$(this).parents("li").attr("id");location.href="detial.html?"+t}),$(".add,.minus,.action-o").click(function(t){if(console.log(t.target),"add"==t.target.className)var a=1;else if("minus"==t.target.className)a=-1;else{if("action-o inblock"!=t.target.className)return;a=0}var n=$(this).parents("li").attr("id"),s=$(this).parents("li").attr("gid");console.log(n,s,c,a),$.ajax({type:"get",url:"http://47.104.244.134:8080/cartupdate.do",async:!0,data:{id:n,gid:s,num:a,token:c},success:function(t){console.log(t),0==t.code?location.reload():alert("操作失败,请重试")}})})}})});