"use strict";$(function(){var s=location.search;"c-login"==(s=s.replace("?",""))&&($("#register").css("display","none"),$("#login").css("display","block"),$(".log-con").find("li").eq(1).addClass("click").siblings().removeClass("click")),"c-register"==s&&($("#login").css("display","none"),$("#register").css("display","block"),$(".log-con").find("li").eq(0).addClass("click").siblings().removeClass("click")),$("#register input").focus(function(){$(this).css("border-color","#FF9900")});var i=1,e=0,l=0,c=0,o=0;function r(s){for(var i=document.cookie.split("; "),e=0;e<i.length;e++){var l=i[e].split("=");if(l[0]==s)return l[1]}}$("#phone").blur(function(){var s=$(this).val();/\w{3,10}/.test(s)?($(this).css("border-color","#196605").parent().find("p").css("visibility","visible").find("b").addClass("suc"),e=1):$(this).css("border-color","#e60000").parent().find("p").css("visibility","visible").find("b").removeClass("suc")}),$("#psw").blur(function(){var s=$(this).val();6<=s.length&&s.length<=20?($(this).css("border-color","#196605").parent().find("p").css("visibility","visible").find("b").addClass("suc"),l=1):$(this).css("border-color","#e60000").parent().find("p").css("visibility","visible").find("b").removeClass("suc")}),$("#alipsw").blur(function(){var s=$(this).val(),i=$("#psw").val();0==s.length?$(this).css("border-color","#e60000").parent().find("p").css("visibility","visible").find("b").removeClass("suc").siblings().html("重复密码不能为空，请确认"):s==i?($(this).css("border-color","#196605").parent().find("p").css("visibility","visible").find("b").addClass("suc"),c=1):$(this).css("border-color","#e60000").parent().find("p").css("visibility","visible").find("b").removeClass("suc").siblings().html("2次密码不一致，请重新输入")}),$("#email").blur(function(){var s=$(this).val();/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/.test(s)?($(this).css("border-color","#196605").parent().find("p").css("visibility","visible").find("b").addClass("suc"),o=1):$(this).css("border-color","#e60000").parent().find("p").css("visibility","visible").find("b").removeClass("suc")}),$("#alow").prop("checked",!0),$("#alow").click(function(){$("#alow").prop("checked")?($(this).parent().find("p").css("visibility","visible").find("b").addClass("suc"),i=1):(i=-1,$(this).parent().find("p").css("visibility","visible").find("b").removeClass("suc"))}),$("#btn").click(function(){5!=(i+=e+l+c+o)?alert("信息不完全，请补全信息"):$.ajax({type:"post",url:"http://47.104.244.134:8080/usersave.do",async:!0,data:{username:$("#phone").val(),password:$("#psw").val(),email:$("#email").val(),sex:"1"},success:function(s){console.log(s),location.href="login.html?c-login"}})}),$("#user").blur(function(){var s=$(this).val();/\w{3,10}/.test(s)?$(this).css("border-color","#196605").parent().find("p").css("visibility","visible").find("b").addClass("suc"):$(this).css("border-color","#e60000").parent().find("p").css("visibility","visible").find("b").removeClass("suc"),r(this.value)&&($("#password")[0].value=r(this.value))}),$("#password").blur(function(){var s=$(this).val();6<=s.length&&s.length<=20?$(this).css("border-color","#196605").parent().find("p").css("visibility","visible").find("b").addClass("suc"):$(this).css("border-color","#e60000").parent().find("p").css("visibility","visible").find("b").removeClass("suc")}),$("#log").click(function(){$.ajax({type:"post",url:"http://47.104.244.134:8080/userlogin.do",async:!0,data:{name:$("#user").val(),password:$("#password").val()},success:function(s){console.log(s);var i,e,l,c,o=s.data.token;"OK"==s.msg?($("#remb").prop("checked")&&(i=$("#user")[0].value,e=$("#password")[0].value,l=30,(c=new Date).setDate(c.getDate()+l),document.cookie=i+"="+e+";expires="+c),location.href="index.html?c-login&"+o):alert("用户不存在，请注册后登陆")}})})});